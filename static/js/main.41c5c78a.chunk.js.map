{"version":3,"sources":["api/api.ts","api/posts.ts","components/PostsList/PostsList.tsx","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["BASE_URL","getUserPosts","userId","a","fetch","response","json","res","Response","Error","getPostComments","postId","then","ok","createPostComments","comment","method","body","JSON","stringify","headers","deletePostComments","id","PostsList","idOfUser","selectedPostId","setSelectedPostId","setPost","useState","posts","setPosts","getPosts","postsFromS","console","log","useEffect","className","map","post","title","type","onClick","NewCommentForm","getComments","commentName","setCommentName","commentEmail","setCommentEmail","commentBody","setCommentBody","createComments","onSubmit","event","preventDefault","newComment","name","email","placeholder","value","onChange","target","required","PostDetails","comments","setComments","hideComments","setHideComments","deleteComment","commentsFromS","updateComments","length","App","setIdOfUser","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.41c5c78a.chunk.js","sourcesContent":["export const BASE_URL = 'https://mate.academy/students-api';\n","import { BASE_URL } from './api';\n\nexport async function getUserPosts(userId: number): Promise<Post[]> {\n  const response = await fetch(`${BASE_URL}/posts${userId === 0 ? '' : `?userId=${userId}`}`);\n  const res = await response.json();\n\n  if (res.Response === 'False') {\n    throw new Error('Something went wrong.');\n  } else {\n    return res;\n  }\n}\n\nexport function getPostComments(postId: number): Promise<Comment[]> {\n  return fetch(`${BASE_URL}/comments?postId=${postId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Something went wrong.');\n      } else {\n        return response.json();\n      }\n    });\n}\n\nexport async function createPostComments(comment: NewComment) {\n  const response = await fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    body: JSON.stringify(comment),\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n  });\n\n  const res = await response.json();\n\n  return res;\n}\n\n// export async function createPostComments(comment: NewComment) {\n//   return fetch(`${BASE_URL}/comments`, {\n//     method: 'POST',\n//     body: JSON.stringify(comment),\n//     headers: {\n//       'Content-type': 'application/json; charset=UTF-8',\n//     },\n//   })\n//     .then(response => response.json());\n// }\n\nexport async function deletePostComments(id: number) {\n  return fetch(`${BASE_URL}/comments/${id}`, {\n    method: 'DELETE',\n  });\n}\n\n// export function deletePostComments(id: number) {\n//   return fetch(`${BASE_URL}/comments/${id}`, {\n//     method: 'DELETE',\n//   });\n// }\n","import React, { useEffect, useState } from 'react';\nimport { getUserPosts } from '../../api/posts';\nimport './PostsList.scss';\n\ninterface Props {\n  idOfUser: number;\n  selectedPostId: number;\n  setSelectedPostId: (arg: number) => void;\n  setPost: (arg: Post | null) => void;\n}\n\nexport const PostsList: React.FC<Props>\n  = ({\n    idOfUser,\n    selectedPostId,\n    setSelectedPostId,\n    setPost,\n  }) => {\n    const [posts, setPosts] = useState<Post[]>([]);\n\n    const getPosts = async (userId: number) => {\n      try {\n        const postsFromS = await getUserPosts(userId);\n\n        setPosts(postsFromS);\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.log(error, 'Request failed');\n      }\n    };\n\n    useEffect(() => {\n      getPosts(idOfUser);\n    }, [idOfUser]);\n\n    return (\n      <div className=\"PostsList\">\n        <h2>Posts:</h2>\n\n        <ul\n          className=\"PostsList__list\"\n          data-cy=\"postDetails\"\n        >\n          {posts && (posts.map(post => (\n            <li\n              className=\"PostsList__item\"\n              key={post.id}\n            >\n              <div>\n                <b>{`[User #${post.userId}]: `}</b>\n                {post.title}\n              </div>\n\n              {selectedPostId === post.id\n                ? (\n                  <button\n                    type=\"button\"\n                    className=\"PostsList__button button\"\n                    onClick={() => {\n                      setSelectedPostId(0);\n                      setPost(null);\n                    }}\n                  >\n                    Close\n                  </button>\n                )\n                : (\n                  <button\n                    type=\"button\"\n                    className=\"PostsList__button button\"\n                    onClick={() => {\n                      setSelectedPostId(post.id);\n                      setPost(post);\n                    }}\n                  >\n                    Open\n                  </button>\n                )}\n            </li>\n          )))}\n        </ul>\n      </div>\n    );\n  };\n","import React, { useState } from 'react';\nimport { createPostComments } from '../../api/posts';\nimport './NewCommentForm.scss';\n\ninterface Props {\n  postId: number;\n  getComments: (id: number) => Promise<void>;\n}\n\nexport const NewCommentForm: React.FC<Props> = ({\n  postId,\n  getComments,\n}) => {\n  const [commentName, setCommentName] = useState('');\n  const [commentEmail, setCommentEmail] = useState('');\n  const [commentBody, setCommentBody] = useState('');\n\n  const createComments = async (comment: NewComment) => {\n    await createPostComments(comment);\n  };\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const newComment = {\n      name: commentName,\n      email: commentEmail,\n      body: commentBody,\n      postId,\n    };\n\n    await createComments(newComment);\n    await getComments(postId);\n\n    setCommentName('');\n    setCommentEmail('');\n    setCommentBody('');\n  };\n\n  // eslint-disable-next-line no-console\n  console.log('work');\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(event) => {\n        onSubmit(event);\n      }}\n    >\n      <div className=\"form-field\">\n        <input\n          name=\"name\"\n          type=\"text\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={commentName}\n          onChange={event => {\n            setCommentName(event.target.value);\n          }}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          name=\"email\"\n          type=\"text\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={commentEmail}\n          onChange={event => {\n            setCommentEmail(event.target.value);\n          }}\n          required\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={commentBody}\n          onChange={event => {\n            setCommentBody(event.target.value);\n          }}\n          required\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { deletePostComments, getPostComments } from '../../api/posts';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\n\ninterface Props {\n  post: Post;\n}\n\nexport const PostDetails: React.FC<Props> = ({ post }) => {\n  const [comments, setComments] = useState<Comment[] | null>(null);\n  const [hideComments, setHideComments] = useState(false);\n\n  const deleteComment = async (id: number) => {\n    await deletePostComments(id);\n  };\n\n  const getComments = async (postId: number) => {\n    try {\n      const commentsFromS = await getPostComments(postId);\n\n      setComments(commentsFromS);\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log(error, 'Request failed');\n    }\n  };\n\n  const updateComments = async (id: number, postId: number) => {\n    await deleteComment(id);\n    await getComments(postId);\n  };\n\n  useEffect(() => {\n    getComments(post.id);\n  }, [post]);\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{post.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n\n        <button\n          type=\"button\"\n          className=\"button button--pb\"\n          onClick={() => {\n            if (comments?.length !== 0) {\n              setHideComments(!hideComments);\n            }\n          }}\n        >\n          {`${hideComments ? 'Show' : 'Hide'} ${comments?.length} comments`}\n        </button>\n\n        {!hideComments && (\n          <ul\n            className=\"PostDetails__list\"\n            data-cy=\"postDetails\"\n          >\n            {comments?.map(comment => (\n              <li\n                className=\"PostDetails__list-item\"\n                key={comment.id}\n              >\n                <button\n                  type=\"button\"\n                  className=\"PostDetails__remove-button button\"\n                  onClick={() => {\n                    updateComments(comment.id, post.id);\n                  }}\n                >\n                  X\n                </button>\n                <p>{comment.body}</p>\n              </li>\n            ))}\n          </ul>\n        )}\n\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={post.id}\n            getComments={getComments}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\n\nconst App: React.FC = () => {\n  const [idOfUser, setIdOfUser] = useState<number>(0);\n  const [selectedPostId, setSelectedPostId] = useState<number>(0);\n  const [post, setPost] = useState<Post | null>(null);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={idOfUser}\n            onChange={event => {\n              setIdOfUser(+event.target.value);\n            }}\n          >\n            <option value=\"0\">All users</option>\n            <option value=\"1\">Leanne Graham</option>\n            <option value=\"2\">Ervin Howell</option>\n            <option value=\"3\">Clementine Bauch</option>\n            <option value=\"4\">Patricia Lebsack</option>\n            <option value=\"5\">Chelsey Dietrich</option>\n            <option value=\"6\">Mrs. Dennis Schulist</option>\n            <option value=\"7\">Kurtis Weissnat</option>\n            <option value=\"8\">Nicholas Runolfsdottir V</option>\n            <option value=\"9\">Glenna Reichert</option>\n            <option value=\"10\">Leanne Graham</option>\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            idOfUser={idOfUser}\n            selectedPostId={selectedPostId}\n            setSelectedPostId={setSelectedPostId}\n            setPost={setPost}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {post && <PostDetails post={post} />}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}